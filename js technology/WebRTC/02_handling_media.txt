Работа с медиафайлами в браузере

Типы доступного АРИ:
1. Получение и управление как локальными, так и удаленными аудио и видео:
- Интерфейс MediaStream (и связанное с ним использование тегов HTML5 <audio> и <video>)
2. Управление подключениями:
- Интерфейс RTCPeerConnection
3. Управление произвольными данными:
- Интерфейс RTCDataChannel.

Типичный сценарий использования API WebRTC:
1. Создайте объект MediaStream на своих локальных устройствах (например, микрофон, веб-камера).
2. Получите большой двоичный объект URL из локального MediaStream.
3. Используйте полученный BLOB-объект URL для локального предварительного просмотра.
4. Создайте объект RTCPeerConnection.
5. Добавьте локальный поток к вновь созданному соединению.
6. Отправьте собственное описание сеанса удаленному узлу.
7. Получите описание удаленного сеанса от вашего партнера.
8. Обработайте полученное описание сеанса и добавьте удаленный поток в RTCPeerConnection.
9. Получите большой двоичный объект URL из удаленного потока.
10. Используйте полученный BLOB-объект URL для воспроизведения аудио и/или видео удаленного узла.

Один MediaStream может содержать ноль или несколько дорожек. У каждой дорожки есть соответствующий объект MediaStreamTrack, представляющий конкретный источник мультимедиа в пользовательском агенте.

API getUserMedia() позволяет веб-разработчикам получать доступ к носителям локального устройства (аудио, видео) путем указания набора (необязательных) ограничений, а также соответствующих обратных вызовов для асинхронного управления как успешной, так и неудачной настройкой:
	getUserMedia(constraints, successCallback, errorCallback
getUserMedia() запрашивает у пользователя разрешение на использование веб-камеры или другого видео- или аудиовхода.

Метод createObjectUrl () указывает браузеру создать уникальный URL-адрес, связанный либо с локальным файлом, либо с двоичным объектом (blob), и управлять им:
createObjectURL (поток)

код:
/code/webrtc/ch2/get_user_media(html,js)
документация:
https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/srcObject
https://developer.mozilla.org/ru/docs/Web/API/MediaDevices/getUserMedia

Браузеры модели мультимедиа обеспечивают конвейер мультимедиа от источников к приемникам. В браузере приемниками являются теги <img>, <video> и <audio>. Источником может быть физическая веб-камера, микрофон, локальный видео- или аудиофайл с жесткого диска пользователя, сетевой ресурс или статический изображение.

Ограничения(Constraints) - это дополнительная функция для ограничения диапазона допустимой изменчивости в источнике дорожки MediaStream. Ограничения отображаются на треках через интерфейс Constrainable, который включает API для динамического изменения ограничений.

Ограничения хранятся в объекте дорожки, а не в источнике. Каждая дорожка может быть дополнительно инициализирована ограничениями. В противном случае ограничения могут быть добавлены позже через специальные API-интерфейсы ограничений.

код:
/code/webrtc/ch2/constraints(html,js)




