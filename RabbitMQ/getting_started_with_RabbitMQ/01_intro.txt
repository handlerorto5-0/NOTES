Поток сообщений в RabbitMQ
1. Производитель публикует сообщение на exchange. При создании exchange необходимо указать его тип.
2. exchange получает сообщение и теперь отвечает за его маршрутизацию. _Exchange рассматривает различные атрибуты и ключи сообщений в зависимости от типа exchange.
3. exchange направляет сообщение в правильную очередь в зависимости от этих атрибутов.
4. Сообщения остаются в очереди до тех пор, пока их не обработает потребитель.
5. Затем потребитель удаляет сообщение из очереди после обработки.
------------------------------------------
Типы Exchanges:
- Direct - прямой обмен доставляет сообщения в очереди на основе ключа маршрутизации сообщений.
- Topic - обмен темами выполняет сопоставление с подстановочными знаками между ключом маршрутизации и шаблоном маршрутизации, указанным в привязке.
- Fanout - обмен фэнаутом направляет сообщения во все связанные с ним очереди.
- Headers - обмен заголовками использует атрибуты заголовка сообщения для целей маршрутизации.
-------------------------------------------
КОНЦЕПЦИИ RABBITMQ И СЕРВЕРА
- Producer - Приложение, которое отправляет сообщения
- Consumer - Приложение, получающее сообщения
- Queue - буфер, в котором хранятся сообщения
- Message - данные, отправляемые от производителя к потребителю через RabbitMQ
- Connection - TCP-соединение между приложением и брокером RabbitMQ
- Channel - виртуальное соединение внутри соединения. При публикации или использовании сообщений или подписке на очередь все делается через канал.
- Exchange - получает сообщения от производителей и помещает их в очереди в зависимости от правил, определенных типом обмена. Очередь должна быть привязана хотя бы к одному обмену, чтобы иметь возможность получать сообщения.
- Binding - Связь между очередью и обменом
- Routing Key - ключ, на который биржа смотрит, чтобы решить, как направить сообщение в очереди. Ключ маршрутизации можно рассматривать как адрес назначения сообщения.
- AMQP - Advanced Message Queuing Protocol - основной протокол, используемый RabbitMQ для обмена сообщениями.
- Users - можно подключиться к RabbitMQ с заданным именем пользователя и паролем, с назначенными разрешениями, такими как права на чтение, запись и настройку. Пользователям также могут быть назначены разрешения для определенных виртуальных хостов.
- Vhost - виртуальный хост или Vhost разделяют приложения, использующие один и тот же экземпляр RabbitMQ. Разные пользователи могут иметь разные привилегии доступа к разным виртуальным хостам и очередям, а обмены могут быть созданы так, чтобы они существовали только в одном виртуальном хосте.
- Acknowledgments and Confirms - индикаторы того, что сообщения были получены или в соответствии с которыми были приняты меры. Благодарности можно использовать в обоих направлениях; например, потребитель может указать серверу, что он получил / обработал сообщение, и сервер может сообщить то же самое производителю.
---------------------------------------------------
