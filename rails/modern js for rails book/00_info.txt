истосник кода к книге https://pragprog.com/book/nrclient

username “areader@example.com”
password “awesome”

Hotwire в настоящее время состоит из двух частей: Turbo, которая управляет HTML-запросами к серверу и правильно направляет ответы, и Stimulus, которая представляет собой минимальную библиотеку JavaScript, хорошо подходящую для взаимодействий, которые Turbo не может обрабатывать.

Turbo Drive - это новое название того, что раньше называлось Turbolinks. Когда Turbo Drive активен, он фиксирует каждую нажатую ссылку или отправку формы на странице, получает ответ в фоновом режиме, извлекает тело запроса, сообщает об ошибках и заменяет существующее тело страницы новым ответом. Он также выполняет некоторую закулисную бухгалтерию, чтобы кнопка «Назад» работала, создавала кеши и тому подобное.

Турбо-фрейм - это настраиваемый HTML-тег <turbo-frame>, который обертывает часть нашей страницы. Turbo Frames захватывает навигацию. Внутри турбо-кадра любые щелчки по ссылке или отправка формы по умолчанию захватывают ответ сервера, ищут в этом ответе турбо-кадр с тем же идентификатором и перерисовывают только этот турбо-кадр только с новой частью ответа турбо-кадра. . Другими словами, Turbo Frames позволяет небольшой части страницы вести себя так, как Turbo Drive обрабатывает всю страницу.
---
Когда оценивается ответ Turbo Stream, каждый отдельный элемент Turbo Stream выполняет свое действие над своей целью.
<turbo-stream action="<ACTION>" target="<TARGET>">
<template>
OUR HTML GOES HERE
</template>
</turbo-stream>
цель, которая представляет собой DOM ID элемента изменяемой страницы, и действие, которое указывает, что делать с входящим HTML

• append: тело шаблона добавляется в конец цели, а существующее содержимое сохраняется.
• prepend: тело шаблона добавляется в начало цели, а существующее содержимое сохраняется.
• remove: удаляется элемент с целевым идентификатором. В этом случае турбо-поток не обязательно должен иметь какое-либо содержимое.
• replace: тело шаблона полностью заменит существующий элемент с целевым идентификатором. Обычно тело шаблона представляет собой новый элемент с тем же идентификатором.
• update: тело шаблона заменит содержимое целевого объекта, но не сам элемент.

Rails распознает turbo_stream как формат. Это означает, что вы можете использовать format.turbo_stream, чтобы указать поведение ответа, специфичное для запросов Turbo. Rails также будет автоматически использовать файл с turbo_stream в качестве формата, как это делается для HTML и JSON, поэтому он ищет файл с именем <action> .turbo_stream.erb.

---------------------------
Stimulus

Несколько концепций в Stimulus описывают, как ваша HTML-разметка связана с вашим кодом JavaScript. Все эти элементы вставляются в ваше приложение путем добавления определенных атрибутов данных к элементам DOM в разметке HTML, которую вы отправляете в браузер. Когда страница загружается, Stimulus ищет эти специальные атрибуты и использует их для настройки прослушивателей событий за сцены. Эти слушатели отправляют события методу контроллера, указанному в ваших действиях:
- Контроллеры - это то место, где идет ваш код Stimulus JavaScript. Они содержат методы, которые вызываются в ответ на происходящие события.
- Действия означают, что вы заинтересованы в том, чтобы Stimulus что-то сделал в ответ на событие на странице.
- Цели - это элементы DOM, которые представляют интерес для контроллера, обычно потому, что контроллер использует элемент для определения состояния страницы или потому, что контроллер использует состояние страницы для изменения элемента.
- Карты данных и значения - это состояние, которое хранится в модели DOM, которая представляет интерес для контроллера. Stimulus позволяет вам объявлять типы этих значений в вашем контроллере, хотя, как вы увидите, это немного конфликтует с TypeScript.
- Классы. Обычно карты данных и значения используются для представления классов CSS. Stimulus предоставляет специальный механизм для управления обновлением классов CSS в элементах DOM.
---------------------------------------------
React
$ yarn add react react-dom @babel/preset-react @types/react @types/react-dom




























